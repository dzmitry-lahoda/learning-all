var CodeMirror=function(){function t(d,f){function r(a){oa=null;var b={line:0,ch:0};C(b,{line:p.length-1,ch:p[p.length-1].text.length},Ia(a),b,b);oa=new E}function o(){if(D.readOnly!="nocursor"){if(!ua){if(D.onFocus)D.onFocus(ia);ua=true;if(pa.className.search(/\bCodeMirror-focused\b/)==-1)pa.className+=" CodeMirror-focused";Xa||Pa()}ba();Fb()}}function s(){if(ua){if(D.onBlur)D.onBlur(ia);ua=false;pa.className=pa.className.replace(" CodeMirror-focused","")}clearInterval(qb);setTimeout(function(){ua||
(va=null)},150)}function C(a,b,c,e,g){if(oa){for(var i=[],h=a.line,j=b.line+1;h<j;++h)i.push(p[h].text);for(oa.addChange(a.line,c.length,i);oa.done.length>D.undoDepth;)oa.done.shift()}ka(a,b,c,e,g)}function A(a,b){var c=a.pop();if(c){for(var e=[],g=c.start+c.added,i=c.start;i<g;++i)e.push(p[i].text);b.push({start:c.start,added:c.old.length,old:e});i=c.start+c.old.length-1;e=e[e.length-1];var h=c.old[c.old.length-1];if(h)if(e){for(var j=e.length,m=h.length;j>=0&&m>=0;--j,--m)if(e.charAt(j)!=h.charAt(m))break;
e=m+1}else e=h.length;else e=e?e.length:0;i=$({line:i,ch:e});ka({line:c.start,ch:0},{line:g-1,ch:p[g-1].text.length},c.old,i,i)}}function Q(){A(oa.done,oa.undone)}function fa(){A(oa.undone,oa.done)}function ka(a,b,c,e,g){for(var i=false,h=Ya.length,j=a.line;j<=b.line;++j)if(p[j].text.length==h){i=true;break}var m=b.line-a.line;j=p[a.line];var l=p[b.line];if(j==l)if(c.length==1)j.replace(a.ch,b.ch,c[0]);else{l=j.split(b.ch,c[c.length-1]);var x=[a.line+1,m];j.replace(a.ch,j.text.length,c[0]);j=1;for(var N=
c.length-1;j<N;++j)x.push(new u(c[j]));x.push(l);p.splice.apply(p,x)}else if(c.length==1){j.replace(a.ch,j.text.length,c[0]+l.text.slice(b.ch));p.splice(a.line+1,m)}else{x=[a.line+1,m-1];j.replace(a.ch,j.text.length,c[0]);l.replace(0,b.ch,c[c.length-1]);j=1;for(N=c.length-1;j<N;++j)x.push(new u(c[j]));p.splice.apply(p,x)}j=a.line;for(N=j+c.length;j<N;++j){l=p[j].text;if(l.length>h){Ya=l;h=l.length;i=false}}if(i){h=0;Ya="";j=0;for(N=p.length;j<N;++j){l=p[j].text;if(l.length>h){h=l.length;Ya=l}}}i=
[];m=c.length-m-1;j=0;for(l=wa.length;j<l;++j){h=wa[j];if(h<a.line)i.push(h);else h>b.line&&i.push(h+m)}if(c.length<5){l=a.line;j=a.line+c.length;for(h=fb(l);l<j;++l){x=p[l];x.highlight(ca,h);x.stateAfter=J(ca,h)}i.push(a.line+c.length)}else i.push(a.line);wa=i;rb(100);ja.push({from:a.line,to:b.line+1,diff:m});sb={from:a,to:b,text:c};Qa(e,g,n.from.line<=Math.min(b.line,b.line+m)?n.from.line:n.from.line+m,n.to.line<=Math.min(b.line,b.line+m)?n.to.line:n.to.line+m);Ea.style.height=p.length*sa()+2*ga.offsetTop+
"px"}function la(a,b,c){function e(i){if(k(i,b))return i;if(!k(c,i))return g;var h=i.line+a.length-(c.line-b.line)-1,j=i.ch;if(i.line==c.line)j+=a[a.length-1].length-(c.ch-(c.line==b.line?b.ch:0));return{line:h,ch:j}}b=$(b);c=c?$(c):b;a=Ia(a);var g;Ra(a,b,c,function(i){g=i;return{from:e(n.from),to:e(n.to)}});return g}function ta(a,b){Ra(Ia(a),n.from,n.to,function(c){return b=="end"?{from:c,to:c}:b=="start"?{from:n.from,to:n.from}:{from:n.from,to:c}})}function Ra(a,b,c,e){e=e({line:b.line+a.length-
1,ch:a.length==1?a[0].length+b.ch:a[a.length-1].length});C(b,c,a,e.from,e.to)}function na(a,b){var c=a.line,e=b.line;if(c==e)return p[c].text.slice(a.ch,b.ch);var g=[p[c].text.slice(a.ch)];for(c+=1;c<e;++c)g.push(p[c].text);g.push(p[e].text.slice(0,b.ch));return g.join("\n")}function Za(){return na(n.from,n.to)}function ba(){tb||ub.set(2E3,function(){vb();Sa();ua&&ba();wb()})}function qa(a){function b(){vb();var e=Sa();if(e=="moved"&&a)Ja[a]=true;if(!e&&!c){c=true;ub.set(80,b)}else{tb=false;ba()}wb()}
var c=false;tb=true;ub.set(20,b)}function Sa(){function a(xa,Ba){for(var ma=0;;){var Ka=c.indexOf("\n",ma);if(Ka==-1||(c.charAt(Ka-1)=="\r"?Ka-1:Ka)>=xa)return{line:Ba,ch:xa-ma};++Ba;ma=Ka+1}}if(!Xa){var b=false,c=X.value,e=gb(X);if(!e)return false;b=da.text!=c;var g=La,i=b||e.start!=da.start||e.end!=(g?da.start:da.end);if(!i&&!g)return false;if(b){va=La=null;if(D.readOnly){ya=true;return"changed"}}var h=a(e.start,da.from),j=a(e.end,da.from);if(g){var m=e.start==g.anchor?j:h;j=va?n.to:e.start==g.anchor?
h:j;if(n.inverted=k(m,j))h=m;else{La=null;h=j;j=m}}if(h.line==j.line&&h.line==n.from.line&&h.line==n.to.line&&!va)ya=false;if(b){m=0;g=c.length;for(var l=Math.min(g,da.text.length),x,N=da.from,U=-1;m<l&&(x=c.charAt(m))==da.text.charAt(m);){++m;if(x=="\n"){N++;U=m}}l=U>-1?m-U:m;for(var za=da.to-1,aa=da.text.length;;){x=da.text.charAt(aa);if(c.charAt(g)!=x){++g;++aa;break}x=="\n"&&za--;if(aa<=m||g<=m)break;--g;--aa}U=da.text.lastIndexOf("\n",aa-1);C({line:N,ch:l},{line:za,ch:U==-1?aa:aa-U-1},Ia(c.slice(m,
g)),h,j);if(N!=za||h.line!=N)ya=true}else Qa(h,j);da.text=c;da.start=e.start;da.end=e.end;return b?"changed":i?"moved":false}}function Pa(){for(var a=[],b=Math.max(0,n.from.line-1),c=Math.min(p.length,n.to.line+2),e=b;e<c;++e)a.push(p[e].text);a=X.value=a.join(P);var g=n.from.ch,i=n.to.ch;for(e=b;e<n.from.line;++e)g+=P.length+p[e].text.length;for(e=b;e<n.to.line;++e)i+=P.length+p[e].text.length;da={text:a,from:b,to:c,start:g,end:i};$a(X,g,La?g:i)}function Fa(){D.readOnly!="nocursor"&&X.focus()}function ab(){var a=
xb(n.inverted?n.from:n.to);return Gb(a.x,a.y,a.x,a.yBot)}function Gb(a,b,c,e){var g=ga.offsetLeft,i=ga.offsetTop,h=sa();b+=i;e+=i;a+=g;c+=g;var j=R.clientHeight,m=R.scrollTop;g=false;i=true;if(b<m){R.scrollTop=Math.max(0,b-2*h);g=true}else if(e>m+j){R.scrollTop=e+h-j;g=true}b=R.clientWidth;e=R.scrollLeft;if(a<e){if(a<50)a=0;R.scrollLeft=Math.max(0,a-10);g=true}else if(c>b+e){R.scrollLeft=c+10-b;g=true;if(c>Ea.clientWidth)i=false}if(g&&D.onScroll)D.onScroll(ia);return i}function Hb(){var a=sa(),b=
R.scrollTop-ga.offsetTop;return{from:Math.min(p.length,Math.max(0,Math.floor(b/a))),to:Math.min(p.length,Math.ceil((b+R.clientHeight)/a))}}function hb(a){if(R.clientWidth){for(var b=a===true?[]:[{from:ea,to:Ca,domStart:0}],c=0,e=a.length||0;c<e;++c){for(var g=a[c],i=[],h=g.diff||0,j=0,m=b.length;j<m;++j){var l=b[j];if(g.to<=l.from)i.push({from:l.from+h,to:l.to+h,domStart:l.domStart});else if(l.to<=g.from)i.push(l);else{g.from>l.from&&i.push({from:l.from,to:g.from,domStart:l.domStart});g.to<l.to&&
i.push({from:g.to+h,to:l.to+h,domStart:l.domStart+(g.to-l.from)})}}b=i}h=Hb();g=Math.min(ea,Math.max(h.from-3,0));i=Math.min(p.length,Math.max(Ca,h.to+3));a=[];j=0;m=Ca-ea;var x=g,N=0;c=0;for(e=b.length;c<e;++c){l=b[c];if(!(l.to<=g)){if(l.from>=i)break;if(l.domStart>j||l.from>x){a.push({from:x,to:l.from,domSize:l.domStart-j,domStart:j});N+=l.from-x}x=l.to;j=l.domStart+(l.to-l.from)}}if(j!=m||x!=i){N+=Math.abs(i-x);a.push({from:x,to:i,domSize:m-j,domStart:j})}if(a.length){ha.style.display="none";if(N>
(h.to-h.from)*0.3){l=g=Math.max(h.from-10,0);b=i=Math.min(h.to+7,p.length);c=[];e={line:l,ch:0};for(e=k(n.from,e)&&!k(n.to,e);l<b;++l){j=h=null;if(e){h=0;if(n.to.line==l){e=false;j=n.to.ch}}else if(n.from.line==l)if(n.to.line==l){h=n.from.ch;j=n.to.ch}else{e=true;h=n.from.ch}c.push(p[l].getHTML(h,j,true))}ha.innerHTML=c.join("")}else{b=n.from.line;c=n.to.line;e=0;l=bb&&Ma.createElement("div");h=0;for(j=a.length;h<j;++h){m=a[h];x=m.to-m.from-m.domSize;N=ha.childNodes[m.domStart+m.domSize+e]||null;
if(bb)for(var U=Math.max(-x,m.domSize);U>0;--U)ha.removeChild(N?N.previousSibling:ha.lastChild);else if(x){for(U=Math.max(0,x);U>0;--U)ha.insertBefore(Ma.createElement("pre"),N);for(U=Math.max(0,-x);U>0;--U)ha.removeChild(N?N.previousSibling:ha.lastChild)}var za=ha.childNodes[m.domStart+e],aa=b<m.from&&c>=m.from;for(U=m.from;U<m.to;++U){var xa=null,Ba=null;if(aa){xa=0;if(c==U){aa=false;Ba=n.to.ch}}else if(b==U)if(c==U){xa=n.from.ch;Ba=n.to.ch}else{aa=true;xa=n.from.ch}if(bb){l.innerHTML=p[U].getHTML(xa,
Ba,true);ha.insertBefore(l.firstChild,N)}else{za.innerHTML=p[U].getHTML(xa,Ba,false);za.className=p[U].className||"";za=za.nextSibling}}e+=x}}ha.style.display="";b=g!=ea||i!=Ca||Ib!=R.clientHeight;ea=g;Ca=i;yb.style.top=g*sa()+"px";if(b){Ib=R.clientHeight;Ea.style.height=p.length*sa()+2*ga.offsetTop+"px";ib()}g=Jb(Ya);ga.style.width=g>R.clientWidth?g+"px":"";Ea.style.width=ga.offsetWidth+ga.offsetLeft+"px";if(ha.childNodes.length!=Ca-ea)throw Error("BAD PATCH! "+JSON.stringify(a)+" size="+(Ca-ea)+
" nodes="+ha.childNodes.length);Kb()}}else ea=Ca=0}function ib(){if(D.gutter||D.lineNumbers){var a=yb.offsetHeight,b=R.clientHeight;Ga.style.height=(a-b<2?b:a)+"px";a=[];for(b=ea;b<Math.max(Ca,ea+1);++b){var c=p[b].gutterMarker,e=D.lineNumbers?b+D.firstLineNumber:null;if(c&&c.text)e=c.text.replace("%N%",e!=null?e:"");else if(e==null)e="\u00a0";a.push(c&&c.style?'<pre class="'+c.style+'">':"<pre>",e,"</pre>")}Ga.style.display="none";jb.innerHTML=a.join("");a=String(p.length).length;b=jb.firstChild;
c=b.textContent||b.innerText||b.nodeValue||"";for(e="";c.length+e.length<a;)e+="\u00a0";e&&b.insertBefore(Ma.createTextNode(e),b.firstChild);Ga.style.display="";ga.style.marginLeft=Ga.offsetWidth+"px"}}function Kb(){var a=n.inverted?n.from:n.to,b=sa(),c=Lb(a.line,a.ch)+"px",e=(a.line-ea)*b+"px";kb.style.top=a.line*b-R.scrollTop+"px";if(H(n.from,n.to)){Na.style.top=e;Na.style.left=c;Na.style.display=""}else Na.style.display="none"}function Ta(a,b){var c=va&&$(va);if(c)if(k(c,a))a=c;else if(k(b,c))b=
c;Qa(a,b)}function Qa(a,b,c,e){if(!(H(n.from,a)&&H(n.to,b))){if(k(b,a)){var g=b;b=a;a=g}if(H(a,b))n.inverted=false;else if(H(a,n.to))n.inverted=false;else if(H(b,n.from))n.inverted=true;if(c==null){c=n.from.line;e=n.to.line}if(H(a,b))H(n.from,n.to)||ja.push({from:c,to:e+1});else if(H(n.from,n.to))ja.push({from:a.line,to:b.line+1});else{H(a,n.from)||(a.line<c?ja.push({from:a.line,to:Math.min(b.line,c)+1}):ja.push({from:c,to:Math.min(e,a.line)+1}));H(b,n.to)||(b.line<e?ja.push({from:Math.max(c,a.line),
to:e+1}):ja.push({from:Math.max(a.line,e),to:b.line+1}))}n.from=a;n.to=b;Ha=true}}function Ua(a,b,c){a=$({line:a,ch:b||0});(c?Ta:Qa)(a,a)}function Oa(a){return Math.max(0,Math.min(a,p.length-1))}function $(a){if(a.line<0)return{line:0,ch:0};if(a.line>=p.length)return{line:p.length-1,ch:p[p.length-1].text.length};var b=a.ch,c=p[a.line].text.length;return b==null||b>c?{line:a.line,ch:c}:b<0?{line:a.line,ch:0}:a}function Wb(a){Ta({line:a,ch:0},{line:a,ch:p[a].text.length})}function Xb(a){function b(c){if(H(n.from,
n.to))return Va(n.from.line,c);for(var e=n.to.line-(n.to.ch?1:0),g=n.from.line;g<e;++g)Va(g,c)}va=null;switch(D.tabMode){case "default":return false;case "indent":b("smart");break;case "classic":if(H(n.from,n.to)){a?Va(n.from.line,"smart"):ta("\t","end");break}case "shift":b(a?"subtract":"add")}return true}function Va(a,b){if(b=="smart")if(ca.indent)var c=fb(a);else b="prev";var e=p[a],g=e.indentation(),i=e.text.match(/^\s*/)[0],h;if(b=="prev")h=a?p[a-1].indentation():0;else if(b=="smart")h=ca.indent(c,
e.text.slice(i.length));else if(b=="add")h=g+D.indentUnit;else if(b=="subtract")h=g-D.indentUnit;h=Math.max(0,h);if(h-g){g="";c=0;if(D.indentWithTabs)for(e=Math.floor(h/T);e;--e){c+=T;g+="\t"}for(;c<h;){++c;g+=" "}}else{if(n.from.line!=a&&n.to.line!=a)return;g=i}la(g,{line:a,ch:0},{line:a,ch:i.length})}function Mb(){ca=t.getMode(D,D.mode);for(var a=0,b=p.length;a<b;++a)p[a].stateAfter=null;wa=[0];rb()}function zb(a,b,c){function e(j,m,l,x){j=p[j];m=j.addMark(m,l,x);m.line=j;g.push(m)}a=$(a);b=$(b);
var g=[];if(a.line==b.line)e(a.line,a.ch,b.ch,c);else{e(a.line,a.ch,null,c);for(var i=a.line+1,h=b.line;i<h;++i)e(i,0,null,c);e(b.line,0,b.ch,c)}ja.push({from:a.line,to:b.line+1});return function(){for(var j,m,l=0;l<g.length;++l){var x=g[l],N=v(p,x.line);x.line.removeMark(x);if(N>-1){if(j==null)j=N;m=N}}j!=null&&ja.push({from:j,to:m+1})}}function Jb(a){Aa.innerHTML="<pre><span>x</span></pre>";Aa.firstChild.firstChild.firstChild.nodeValue=a;return Aa.firstChild.firstChild.offsetWidth||10}function Lb(a,
b){if(b==0)return 0;Aa.innerHTML="<pre><span>"+p[a].getHTML(null,null,false,b)+"</span></pre>";return Aa.firstChild.firstChild.offsetWidth}function Nb(a,b){function c(x){Aa.innerHTML="<pre><span>"+e.getHTML(null,null,false,x)+"</span></pre>";return Aa.firstChild.firstChild.offsetWidth}if(b<=0)return 0;for(var e=p[a],g=0,i=0,h=e.text.length,j,m=Math.min(h,Math.ceil(b/Jb("x")));;){var l=c(m);if(l<=b&&m<h)m=Math.min(h,Math.ceil(m*1.2));else{j=l;h=m;break}}if(b>j)return h;m=Math.floor(h*0.8);l=c(m);if(l<
b){g=m;i=l}for(;;){if(h-g<=1)return j-b>b-i?g:h;m=Math.ceil((g+h)/2);l=c(m);if(l>b){h=m;j=l}else{g=m;i=l}}}function xb(a,b){var c=sa(),e=a.line-(b?ea:0);return{x:Lb(a.line,a.ch),y:e*c,yBot:(e+1)*c}}function Ob(a){a=xb(a,true);var b=O(ga);return{x:b.left+a.x,y:b.top+a.y,yBot:b.top+a.yBot}}function sa(){var a=ha.childNodes.length;if(a)return ha.offsetHeight/a||1;Aa.innerHTML="<pre>x</pre>";return Aa.firstChild.offsetHeight||1}function Wa(a,b){var c=O(R,true),e,g;try{e=a.e.clientX;g=a.e.clientY}catch(i){return null}if(!b&&
(e-c.left>R.clientWidth||g-c.top>R.clientHeight))return null;c=O(ga,true);g=ea+Math.floor((g-c.top)/sa());return $({line:g,ch:Nb(Oa(g),e-c.left)})}function Pb(a){function b(){var h=Ia(X.value).join("\n");h!=g&&S(ta)(h,"end");kb.style.position="relative";X.style.cssText=e;Xa=false;Pa();ba()}var c=Wa(a);if(!(!c||window.opera)){if(H(n.from,n.to)||k(c,n.from)||!k(c,n.to))S(Ua)(c.line,c.ch);var e=X.style.cssText;kb.style.position="absolute";X.style.cssText="position: fixed; width: 30px; height: 30px; top: "+
(a.pageY()-1)+"px; left: "+(a.pageX()-1)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";Xa=true;var g=X.value=Za();Fa();$a(X,0,X.value.length);if(Da){a.stop();var i=B(window,"mouseup",function(){i();setTimeout(b,20)},true)}else setTimeout(b,50)}}function Fb(){clearInterval(qb);var a=true;Na.style.visibility="";qb=setInterval(function(){Na.style.visibility=(a=!a)?"":"hidden"},650)}function Qb(a){function b(ma,Ka,Yb){if(ma.text){var cb=
ma.styles;ma=h?0:ma.text.length-1;for(var Ab,db=h?0:cb.length-2,Zb=h?cb.length:-2;db!=Zb;db+=2*j){var lb=cb[db];if(cb[db+1]!=null&&cb[db+1]!=N)ma+=j*lb.length;else for(var Bb=h?0:lb.length-1,$b=h?lb.length:-1;Bb!=$b;Bb+=j,ma+=j)if(ma>=Ka&&ma<Yb&&za.test(Ab=lb.charAt(Bb))){var Rb=Cb[Ab];if(Rb.charAt(1)==">"==h)U.push(Ab);else if(U.pop()!=Rb.charAt(0))return{pos:ma,match:false};else if(!U.length)return{pos:ma,match:true}}}}}var c=n.inverted?n.from:n.to,e=p[c.line],g=c.ch-1,i=g>=0&&Cb[e.text.charAt(g)]||
Cb[e.text.charAt(++g)];if(i){i.charAt(0);var h=i.charAt(1)==">",j=h?1:-1,m=e.styles,l=g+1;i=0;for(var x=m.length;i<x;i+=2)if((l-=m[i].length)<=0){var N=m[i+1];break}var U=[e.text.charAt(g)],za=/[(){}[\]]/;i=c.line;for(x=h?Math.min(i+100,p.length):Math.max(-1,i-100);i!=x;i+=j){e=p[i];var aa=i==c.line;if(aa=b(e,aa&&h?g+1:0,aa&&!h?g:e.text.length))break}aa||(aa={pos:null,match:false});N=aa.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var xa=zb({line:c.line,ch:g},{line:c.line,ch:g+
1},N),Ba=aa.pos!=null?zb({line:i,ch:aa.pos},{line:i,ch:aa.pos+1},N):function(){};c=S(function(){xa();Ba()});if(a)setTimeout(c,800);else mb=c}}function Sb(a){var b,c,e=a;for(a-=40;e>a;--e){if(e==0)return 0;var g=p[e-1];if(g.stateAfter)return e;g=g.indentation();if(c==null||b>g){c=e;b=g}}return c}function fb(a){var b=Sb(a),c=b&&p[b-1].stateAfter;for(c=c?J(ca,c):I(ca);b<a;++b){var e=p[b];e.highlight(ca,c);e.stateAfter=J(ca,c)}p[a].stateAfter||wa.push(a);return c}function ac(){for(var a=+new Date+D.workTime,
b=wa.length;wa.length;){var c=p[ea].stateAfter?wa.pop():ea;if(!(c>=p.length)){var e=Sb(c),g=e&&p[e-1].stateAfter;g=g?J(ca,g):I(ca);for(var i=0,h=ca.compareStates,j=p.length;e<j;++e){var m=p[e],l=m.stateAfter;if(+new Date>a){wa.push(e);rb(D.workDelay);ja.push({from:c,to:e});return}var x=m.highlight(ca,g);m.stateAfter=J(ca,g);if(h){if(l&&h(l,g))break}else if(x||!l)i=0;else if(++i>3)break}ja.push({from:c,to:e})}}if(b&&D.onHighlightComplete)D.onHighlightComplete(ia)}function rb(a){wa.length&&bc.set(a,
S(ac))}function vb(){ya=null;ja=[];sb=Ha=false}function wb(){var a=false;if(Ha)a=!ab();if(ja.length)hb(ja);else Ha&&Kb();a&&ab();Ha&&Fb();if(ua&&!Xa&&(ya===true||ya!==false&&Ha))Pa();Ha&&D.matchBrackets&&setTimeout(S(function(){if(mb){mb();mb=null}Qb(false)}),20);a=sb;if(Ha&&D.onCursorActivity)D.onCursorActivity(ia);if(a&&D.onChange&&ia)D.onChange(ia,a)}function S(a){return function(){Tb++||vb();try{var b=a.apply(this,arguments)}finally{--Tb||wb()}return b}}function Ub(a,b,c){this.atOccurrence=false;
if(c==null)c=typeof a=="string"&&a==a.toLowerCase();b=b&&typeof b=="object"?$(b):{line:0,ch:0};this.pos={from:b,to:b};if(typeof a!="string")this.matches=function(i,h){if(i)for(var j=p[h.line].text.slice(0,h.ch),m=j.match(a),l=0;m;){var x=j.indexOf(m[0]);l+=x;j=j.slice(x+1);if(x=j.match(a))m=x;else break;l++}else{j=p[h.line].text.slice(h.ch);l=(m=j.match(a))&&h.ch+j.indexOf(m[0])}if(m)return{from:{line:h.line,ch:l},to:{line:h.line,ch:l+m[0].length},match:m}};else{if(c)a=a.toLowerCase();var e=c?function(i){return i.toLowerCase()}:
function(i){return i},g=a.split("\n");this.matches=g.length==1?function(i,h){var j=e(p[h.line].text),m=a.length,l;if(i?h.ch>=m&&(l=j.lastIndexOf(a,h.ch-m))!=-1:(l=j.indexOf(a,h.ch))!=-1)return{from:{line:h.line,ch:l},to:{line:h.line,ch:l+m}}}:function(i,h){var j=h.line,m=i?g.length-1:0,l=g[m],x=e(p[j].text),N=i?x.indexOf(l)+l.length:x.lastIndexOf(l);if(!(i?N>=h.ch||N!=l.length:N<=h.ch||N!=x.length-l.length))for(;;){if(i?!j:j==p.length-1)break;x=e(p[j+=i?-1:1].text);l=g[i?--m:++m];if(m>0&&m<g.length-
1)if(x!=l)break;else continue;m=i?x.lastIndexOf(l):x.indexOf(l)+l.length;if(i?m!=x.length-l.length:m!=l.length)break;l={line:h.line,ch:N};j={line:j,ch:m};return{from:i?j:l,to:i?l:j}}}}}var D={},Db=t.defaults,eb;for(eb in Db)if(Db.hasOwnProperty(eb))D[eb]=(f&&f.hasOwnProperty(eb)?f:Db)[eb];var Ma=D.document,pa=Ma.createElement("div");pa.className="CodeMirror";pa.innerHTML='<div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off"></textarea></div><div class="CodeMirror-scroll cm-s-'+
D.theme+'"><div style="position: relative"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"></div><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>';d.appendChild?d.appendChild(pa):d(pa);var kb=pa.firstChild,X=kb.firstChild,R=pa.lastChild,Ea=R.firstChild,Aa=Ea.firstChild,
yb=Aa.nextSibling,Ga=yb.firstChild,jb=Ga.firstChild,ga=Ga.nextSibling.firstChild,Na=ga.firstChild,ha=Na.nextSibling;if(D.tabindex!=null)X.tabindex=D.tabindex;if(!D.gutter&&!D.lineNumbers)Ga.style.display="none";var ub=new G,bc=new G,qb,ca,p=[new u("")],wa,oa=new E,ua;Mb();var n={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false},va,La,Eb,ya,ja,sb,Ha,Xa,ea=0,Ca=0,Ib=0,nb=null,da,mb,Ya="";S(function(){r(D.value||"");ya=false})();B(R,"mousedown",S(function(a){function b(l){var x=Wa(l,true);if(x&&!H(x,
i)){ua||o();i=x;Ta(g,x);ya=false;var N=Hb();if(x.line>=N.to||x.line<N.from)h=setTimeout(S(function(){b(l)}),150)}}var c=Eb;Eb=null;for(var e=a.target();e!=pa;e=e.parentNode)if(e.parentNode==jb){if(D.onGutterClick)D.onGutterClick(ia,v(jb.childNodes,e)+ea);return a.stop()}var g=Wa(a);switch(a.button()){case 3:Da&&!Z&&Pb(a);return;case 2:g&&Ua(g.line,g.ch,true);return}if(g){ua||o();a.stop();if(c&&+new Date-c<400)return Wb(g.line);Ua(g.line,g.ch,true);var i=g,h,j=B(Ma,"mousemove",S(function(l){clearTimeout(h);
l.stop();b(l)}),true),m=B(Ma,"mouseup",S(function(l){clearTimeout(h);var x=Wa(l);x&&Ta(g,x);l.stop();Fa();ya=true;j();m()}),true)}else a.target()==R&&a.stop()}));Da||B(R,"contextmenu",Pb);B(Ea,"dblclick",S(function(a){var b=Wa(a);if(b){for(var c=p[b.line].text,e=b.ch,g=b.ch;e>0&&/\w/.test(c.charAt(e-1));)--e;for(;g<c.length&&/\w/.test(c.charAt(g));)++g;Ta({line:b.line,ch:e},{line:b.line,ch:g});a.stop();Eb=+new Date}}));B(R,"scroll",function(){hb([]);if(D.onScroll)D.onScroll(ia)});B(window,"resize",
function(){hb(true)});B(X,"keyup",S(function(a){if(!(D.onKeyEvent&&D.onKeyEvent(ia,V(a.e)))){if(La){La=null;ya=true}if(a.e.keyCode==16)va=null}}));B(X,"keydown",S(function(a){ua||o();var b=a.e.keyCode;if(w&&b==27)a.e.returnValue=false;var c=(Z?a.e.metaKey:a.e.ctrlKey)&&!a.e.altKey,e=a.e.ctrlKey||a.e.altKey||a.e.metaKey;va=b==16||a.e.shiftKey?va||(n.inverted?n.to:n.from):null;if(!(D.onKeyEvent&&D.onKeyEvent(ia,V(a.e)))){if(b==33||b==34){b=b==34;c=Math.floor(R.clientHeight/sa());e=n.inverted?n.from:
n.to;Ua(e.line+Math.max(c-1,1)*(b?1:-1),e.ch,true);return a.stop()}if(c&&(b==36||b==35||Z&&(b==38||b==40))){b=b==36||b==38?{line:0,ch:0}:{line:p.length-1,ch:p[p.length-1].text.length};Ta(b,b);return a.stop()}if(c&&b==65){b=p.length-1;Qa({line:0,ch:0},{line:b,ch:p[b].text.length});return a.stop()}if(!D.readOnly){if(!e&&b==13)return;if(!e&&b==9&&Xb(a.e.shiftKey))return a.stop();if(c&&b==90){Q();return a.stop()}if(c&&(a.e.shiftKey&&b==90||b==89)){fa();return a.stop()}}nb=(c?"c":"")+b;if(n.inverted&&
Ja.hasOwnProperty(nb))if(a=gb(X)){La={anchor:a.start};$a(X,a.start,a.start)}qa(nb)}}));B(X,"keypress",S(function(a){if(!(D.onKeyEvent&&D.onKeyEvent(ia,V(a.e)))){if(D.electricChars&&ca.electricChars){var b=String.fromCharCode(a.e.charCode==null?a.e.keyCode:a.e.charCode);ca.electricChars.indexOf(b)>-1&&setTimeout(S(function(){Va(n.to.line,"smart")}),50)}b=a.e.keyCode;if(b==13){if(!D.readOnly){ta("\n","end");if(D.enterMode!="flat")Va(n.from.line,D.enterMode=="keep"?"prev":"smart")}a.stop()}else!a.e.ctrlKey&&
!a.e.altKey&&!a.e.metaKey&&b==9&&D.tabMode!="default"?a.stop():qa(nb)}}));B(X,"focus",o);B(X,"blur",s);B(R,"dragenter",function(a){a.stop()});B(R,"dragover",function(a){a.stop()});B(R,"drop",S(function(a){a.e.preventDefault();var b=Wa(a,true),c=a.e.dataTransfer.files;if(!(!b||D.readOnly))if(c&&c.length&&window.FileReader&&window.File){a=function(m,l){var x=new FileReader;x.onload=function(){g[l]=x.result;++i==e&&la(g.join(""),$(b),$(b))};x.readAsText(m)};for(var e=c.length,g=Array(e),i=0,h=0;h<e;++h)a(c[h],
h)}else try{(g=a.e.dataTransfer.getData("Text"))&&la(g,b,b)}catch(j){}}));B(R,"paste",function(){Fa();qa()});B(X,"paste",function(){qa()});B(X,"cut",function(){qa()});var Vb;try{Vb=Ma.activeElement==X}catch(cc){}Vb?setTimeout(o,20):s();var ia={getValue:function(){for(var a=[],b=0,c=p.length;b<c;++b)a.push(p[b].text);return a.join("\n")},setValue:S(r),getSelection:Za,replaceSelection:S(ta),focus:function(){Fa();o();qa()},setOption:function(a,b){D[a]=b;if(a=="lineNumbers"||a=="gutter"){var c=D.gutter||
D.lineNumbers;Ga.style.display=c?"":"none";if(c)ib();else ha.parentNode.style.marginLeft=0}else if(a=="mode"||a=="indentUnit")Mb();else if(a=="readOnly"&&b=="nocursor")X.blur();else if(a=="theme")R.className=R.className.replace(/cm-s-\w+/,"cm-s-"+b)},getOption:function(a){return D[a]},undo:S(Q),redo:S(fa),indentLine:S(function(a){a>=0&&a<p.length&&Va(a,"smart")}),historySize:function(){return{undo:oa.done.length,redo:oa.undone.length}},matchBrackets:S(function(){Qb(true)}),getTokenAt:function(a){a=
$(a);return p[a.line].getTokenAt(ca,fb(a.line),a.ch)},getStateAfter:function(a){a=Oa(a==null?p.length-1:a);return fb(a+1)},cursorCoords:function(a){if(a==null)a=n.inverted;return Ob(a?n.from:n.to)},charCoords:function(a){return Ob($(a))},coordsChar:function(a){var b=O(ga),c=Oa(Math.min(p.length-1,ea+Math.floor((a.y-b.top)/sa())));return $({line:c,ch:Nb(Oa(c),a.x-b.left)})},getSearchCursor:function(a,b,c){return new Ub(a,b,c)},markText:S(function(a,b,c){return S(zb(a,b,c))}),setMarker:function(a,b,
c){if(typeof a=="number")a=p[Oa(a)];a.gutterMarker={text:b,style:c};ib();return a},clearMarker:function(a){if(typeof a=="number")a=p[Oa(a)];a.gutterMarker=null;ib()},setLineClass:S(function(a,b){if(typeof a=="number"){var c=a;a=p[Oa(a)]}else{c=v(p,a);if(c==-1)return null}if(a.className!=b){a.className=b;ja.push({from:c,to:c+1})}return a}),lineInfo:function(a){if(typeof a=="number"){var b=a;a=p[a];if(!a)return null}else{b=v(p,a);if(b==-1)return null}var c=a.gutterMarker;return{line:b,text:a.text,markerText:c&&
c.text,markerClass:c&&c.style}},addWidget:function(a,b,c,e){a=xb($(a));var g=a.yBot,i=a.x;b.style.position="absolute";Ea.appendChild(b);b.style.left=i+"px";if(e=="over")g=a.y;else if(e=="fit"){g=p.length*sa();e=Ea.clientWidth-ga.offsetLeft;g=a.y+b.offsetHeight>g?g-b.offsetHeight:a.y;if(i+b.offsetWidth>e)i=e-b.offsetWidth}b.style.top=g+ga.offsetTop+"px";b.style.left=i+ga.offsetLeft+"px";c&&Gb(i,g,i+b.offsetWidth,g+b.offsetHeight)},lineCount:function(){return p.length},getCursor:function(a){if(a==null)a=
n.inverted;return{line:(a?n.from:n.to).line,ch:(a?n.from:n.to).ch}},somethingSelected:function(){return!H(n.from,n.to)},setCursor:S(function(a,b){b==null&&typeof a.line=="number"?Ua(a.line,a.ch):Ua(a,b)}),setSelection:S(function(a,b){Qa($(a),$(b||a))}),getLine:function(a){if(a>=0&&a<p.length)return p[a].text},setLine:S(function(a,b){a>=0&&a<p.length&&la(b,{line:a,ch:0},{line:a,ch:p[a].text.length})}),removeLine:S(function(a){a>=0&&a<p.length&&la("",{line:a,ch:0},$({line:a+1,ch:0}))}),replaceRange:S(la),
getRange:function(a,b){return na($(a),$(b))},operation:function(a){return S(a)()},refresh:function(){hb(true)},getInputField:function(){return X},getWrapperElement:function(){return pa},getScrollerElement:function(){return R}},tb=false,Cb={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},Tb=0;Ub.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(a){function b(g){g={line:g,ch:0};c.pos={from:g,to:g};return c.atOccurrence=false}
for(var c=this,e=$(a?this.pos.from:this.pos.to);;){if(this.pos=this.matches(a,e)){this.atOccurrence=true;return this.pos.match||true}if(a){if(!e.line)return b(0);e={line:e.line-1,ch:p[e.line-1].text.length}}else{if(e.line==p.length-1)return b(p.length);e={line:e.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return{line:this.pos.from.line,ch:this.pos.from.ch}},to:function(){if(this.atOccurrence)return{line:this.pos.to.line,ch:this.pos.to.ch}},replace:function(a){var b=this;this.atOccurrence&&
S(function(){b.pos.to=la(a,b.pos.from,b.pos.to)})()}};for(var ob in ra)if(ra.propertyIsEnumerable(ob)&&!ia.propertyIsEnumerable(ob))ia[ob]=ra[ob];return ia}function J(d,f){if(f===true)return f;if(d.copyState)return d.copyState(f);var r={},o;for(o in f){var s=f[o];if(s instanceof Array)s=s.concat([]);r[o]=s}return r}function I(d,f,r){return d.startState?d.startState(f,r):true}function q(d){this.pos=this.start=0;this.string=d}function u(d,f){this.styles=f||[d,null];this.stateAfter=null;this.text=d;
this.marked=this.gutterMarker=this.className=null}function M(d,f,r,o){for(var s=0,C=0,A=0;C<f;s+=2){var Q=r[s],fa=C+Q.length;if(A==0){fa>d&&o.push(Q.slice(d-C,Math.min(Q.length,f-C)),r[s+1]);if(fa>=d)A=1}else if(A==1)fa>f?o.push(Q.slice(0,f-C),r[s+1]):o.push(Q,r[s+1]);C=fa}}function E(){this.time=0;this.done=[];this.undone=[]}function z(){if(this.preventDefault){this.preventDefault();this.stopPropagation()}else{this.returnValue=false;this.cancelBubble=true}}function V(d){if(!d.stop)d.stop=z;return d}
function W(d){this.e=d}function B(d,f,r,o){function s(C){r(new W(C||window.event))}if(typeof d.addEventListener=="function"){d.addEventListener(f,s,false);if(o)return function(){d.removeEventListener(f,s,false)}}else{d.attachEvent("on"+f,s);if(o)return function(){d.detachEvent("on"+f,s)}}}function G(){this.id=null}function L(d,f){if(f==null){f=d.search(/[^\s\u00a0]/);if(f==-1)f=d.length}for(var r=0,o=0;r<f;++r)if(d.charAt(r)=="\t")o+=T-o%T;else++o;return o}function O(d,f){for(var r=d.ownerDocument.body,
o=0,s=0,C=false,A=d;A;A=A.offsetParent){o+=A.offsetLeft;s+=A.offsetTop;var Q;if(Q=f){Q=A.currentStyle?A.currentStyle:window.getComputedStyle(A,null);Q=Q.position=="fixed"}if(Q)C=true}r=f&&!C?null:r;for(A=d.parentNode;A!=r;A=A.parentNode)if(A.scrollLeft!=null){o-=A.scrollLeft;s-=A.scrollTop}return{left:o,top:s}}function H(d,f){return d.line==f.line&&d.ch==f.ch}function k(d,f){return d.line<f.line||d.line==f.line&&d.ch<f.ch}function y(d){return d.replace(/[<>&]/g,function(f){return f=="&"?"&amp;":f==
"<"?"&lt;":"&gt;"})}function v(d,f){if(d.indexOf)return d.indexOf(f);for(var r=0,o=d.length;r<o;++r)if(d[r]==f)return r;return-1}t.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:false,tabMode:"classic",enterMode:"indent",electricChars:true,onKeyEvent:null,lineNumbers:false,gutter:false,firstLineNumber:1,readOnly:false,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,
undoDepth:40,tabindex:null,document:window.document};var F={},Y={};t.defineMode=function(d,f){if(!t.defaults.mode&&d!="null")t.defaults.mode=d;F[d]=f};t.defineMIME=function(d,f){Y[d]=f};t.getMode=function(d,f){if(typeof f=="string"&&Y.hasOwnProperty(f))f=Y[f];if(typeof f=="string")var r=f,o={};else if(f!=null){r=f.name;o=f}var s=F[r];if(!s){window.console&&console.warn("No mode "+r+" found, falling back to plain text.");return t.getMode(d,"text/plain")}return s(d,o||{})};t.listModes=function(){var d=
[],f;for(f in F)F.propertyIsEnumerable(f)&&d.push(f);return d};t.listMIMEs=function(){var d=[],f;for(f in Y)Y.propertyIsEnumerable(f)&&d.push(f);return d};var ra={};t.defineExtension=function(d,f){ra[d]=f};t.fromTextArea=function(d,f){function r(){d.value=A.getValue()}f||(f={});f.value=d.value;if(!f.tabindex&&d.tabindex)f.tabindex=d.tabindex;if(d.form){var o=B(d.form,"submit",r,true);if(typeof d.form.submit=="function"){var s=d.form.submit,C=function(){r();d.form.submit=s;d.form.submit();d.form.submit=
C};d.form.submit=C}}d.style.display="none";var A=t(function(Q){d.parentNode.insertBefore(Q,d.nextSibling)},f);A.save=r;A.toTextArea=function(){r();d.parentNode.removeChild(A.getWrapperElement());d.style.display="";if(d.form){o();if(typeof d.form.submit=="function")d.form.submit=s}};return A};t.startState=I;t.copyState=J;q.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<
this.string.length)return this.string.charAt(this.pos++)},eat:function(d){var f=this.string.charAt(this.pos);if(typeof d=="string"?f==d:f&&(d.test?d.test(f):d(f))){++this.pos;return f}},eatWhile:function(d){for(var f=this.start;this.eat(d););return this.pos>f},eatSpace:function(){for(var d=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>d},skipToEnd:function(){this.pos=this.string.length},skipTo:function(d){d=this.string.indexOf(d,this.pos);if(d>-1){this.pos=d;
return true}},backUp:function(d){this.pos-=d},column:function(){return L(this.string,this.start)},indentation:function(){return L(this.string)},match:function(d,f,r){if(typeof d=="string"){if((r?this.string.toLowerCase():this.string).indexOf(r?d.toLowerCase():d,this.pos)==this.pos){if(f!==false)this.pos+=d.length;return true}}else{if((d=this.string.slice(this.pos).match(d))&&f!==false)this.pos+=d[0].length;return d}},current:function(){return this.string.slice(this.start,this.pos)}};t.StringStream=
q;u.prototype={replace:function(d,f,r){var o=[],s=this.marked;M(0,d,this.styles,o);r&&o.push(r,null);M(f,this.text.length,this.styles,o);this.styles=o;this.text=this.text.slice(0,d)+r+this.text.slice(f);this.stateAfter=null;if(s){d=r.length-(f-d);r=this.text.length;for(o=0;o<s.length;++o){var C=s[o],A=false;if(C.from>=r)A=true;else{C.from=C.from<=Math.min(f,f+d)?C.from:C.from+d;if(C.to!=null)C.to=C.to<=Math.min(f,f+d)?C.to:C.to+d}if(A||C.from>=C.to){s.splice(o,1);o--}}}},split:function(d,f){var r=
[f,null];M(d,this.text.length,this.styles,r);return new u(f+this.text.slice(d),r)},addMark:function(d,f,r){d={from:d,to:f,style:r};if(this.marked==null)this.marked=[];this.marked.push(d);this.marked.sort(function(o,s){return o.from-s.from});return d},removeMark:function(d){var f=this.marked;if(f)for(var r=0;r<f.length;++r)if(f[r]==d){f.splice(r,1);break}},highlight:function(d,f){var r=new q(this.text),o=this.styles,s=0,C=false,A=o[0],Q;for(this.text==""&&d.blankLine&&d.blankLine(f);!r.eol();){var fa=
d.token(r,f),ka=this.text.slice(r.start,r.pos);r.start=r.pos;if(s&&o[s-1]==fa)o[s-2]+=ka;else if(ka){if(!C&&(o[s+1]!=fa||s&&o[s-2]!=Q))C=true;o[s++]=ka;o[s++]=fa;Q=A;A=o[s]}if(r.pos>5E3){o[s++]=this.text.slice(r.pos);o[s++]=null;break}}if(o.length!=s){o.length=s;C=true}if(s&&o[s-2]!=Q)C=true;return C||o.length<5&&this.text.length<10},getTokenAt:function(d,f,r){for(var o=new q(this.text);o.pos<r&&!o.eol();){o.start=o.pos;var s=d.token(o,f)}return{start:o.start,end:o.pos,string:o.current(),className:s||
null,state:f}},indentation:function(){return L(this.text)},getHTML:function(d,f,r,o){function s(Fa,ab){if(Fa)ab?C.push('<span class="cm-',ab,'">',y(Fa),"</span>"):C.push(y(Fa))}var C=[];if(r)C.push(this.className?'<pre class="'+this.className+'">':"<pre>");var A=this.styles,Q=this.text,fa=this.marked;if(d==f)d=null;var ka=Q.length;if(o!=null)ka=Math.min(o,ka);if(!Q&&o==null)s(" ",d!=null&&f==null?"CodeMirror-selected":null);else if(!fa&&d==null)for(d=o=0;d<ka;o+=2){f=A[o];var la=f.length;if(d+la>
ka)f=f.slice(0,ka-d);d+=la;s(f,A[o+1])}else{o=Q=0;var ta="",Ra=-1,na=null,Za=function(){if(fa){Ra+=1;na=Ra<fa.length?fa[Ra]:null}};for(Za();Q<ka;){var ba=ka,qa="";if(d!=null)if(d>Q)ba=d;else if(f==null||f>Q){qa=" CodeMirror-selected";if(f!=null)ba=Math.min(ba,f)}for(;na&&na.to!=null&&na.to<=Q;)Za();if(na)if(na.from>Q)ba=Math.min(ba,na.from);else{qa+=" "+na.style;if(na.to!=null)ba=Math.min(ba,na.to)}for(;;){var Sa=Q+ta.length,Pa=la;if(qa)Pa=la?la+qa:qa;s(Sa>ba?ta.slice(0,ba-Q):ta,Pa);if(Sa>=ba){ta=
ta.slice(ba-Q);Q=ba;break}Q=Sa;ta=A[o++];la=A[o++]}}d!=null&&f==null&&s(" ","CodeMirror-selected")}r&&C.push("</pre>");return C.join("")}};E.prototype={addChange:function(d,f,r){this.undone.length=0;var o=+new Date,s=this.done[this.done.length-1];if(o-this.time>400||!s||s.start>d+f||s.start+s.added<d-s.added+s.old.length)this.done.push({start:d,added:f,old:r});else{var C=0;if(d<s.start){for(var A=s.start-d-1;A>=0;--A)s.old.unshift(r[A]);s.added+=s.start-d;s.start=d}else if(s.start<d){C=d-s.start;
f+=C}A=s.added-C;for(d=r.length;A<d;++A)s.old.push(r[A]);if(s.added<f)s.added=f}this.time=o}};W.prototype={stop:function(){z.call(this.e)},target:function(){return this.e.target||this.e.srcElement},button:function(){if(this.e.which)return this.e.which;else if(this.e.button&1)return 1;else if(this.e.button&2)return 3;else if(this.e.button&4)return 2},pageX:function(){if(this.e.pageX!=null)return this.e.pageX;var d=this.target().ownerDocument;return this.e.clientX+d.body.scrollLeft+d.documentElement.scrollLeft},
pageY:function(){if(this.e.pageY!=null)return this.e.pageY;var d=this.target().ownerDocument;return this.e.clientY+d.body.scrollTop+d.documentElement.scrollTop}};G.prototype={set:function(d,f){clearTimeout(this.id);this.id=setTimeout(f,d)}};var bb=function(){var d=document.createElement("pre");d.innerHTML=" ";return!d.innerHTML}(),Da=/gecko\/\d{7}/i.test(navigator.userAgent),w=/MSIE \d/.test(navigator.userAgent),K=/Apple Computer/.test(navigator.vendor),P="\n";(function(){var d=document.createElement("textarea");
d.value="foo\nbar";if(d.value.indexOf("\r")>-1)P="\r\n"})();for(var T=8,Z=/Mac/.test(navigator.platform),Ja={},pb=35;pb<=40;++pb)Ja[pb]=Ja["c"+pb]=true;t.htmlEscape=y;var Ia,gb,$a;Ia="\n\nb".split(/\n/).length!=3?function(d){for(var f=0,r,o=[];(r=d.indexOf("\n",f))>-1;){o.push(d.slice(f,d.charAt(r-1)=="\r"?r-1:r));f=r+1}o.push(d.slice(f));return o}:function(d){return d.split(/\r?\n/)};t.splitLines=Ia;if(window.getSelection){gb=function(d){try{return{start:d.selectionStart,end:d.selectionEnd}}catch(f){return null}};
$a=K?function(d,f,r){if(f==r)d.setSelectionRange(f,r);else{d.setSelectionRange(f,r-1);window.getSelection().modify("extend","forward","character")}}:function(d,f,r){try{d.setSelectionRange(f,r)}catch(o){}}}else{gb=function(d){try{var f=d.ownerDocument.selection.createRange()}catch(r){return null}if(!f||f.parentElement()!=d)return null;var o=d.value,s=o.length,C=d.createTextRange();C.moveToBookmark(f.getBookmark());var A=d.createTextRange();A.collapse(false);if(C.compareEndPoints("StartToEnd",A)>-1)return{start:s,
end:s};d=-C.moveStart("character",-s);for(f=o.indexOf("\r");f>-1&&f<d;f=o.indexOf("\r",f+1),d++);if(C.compareEndPoints("EndToEnd",A)>-1)return{start:d,end:s};s=-C.moveEnd("character",-s);for(f=o.indexOf("\r");f>-1&&f<s;f=o.indexOf("\r",f+1),s++);return{start:d,end:s}};$a=function(d,f,r){var o=d.createTextRange();o.collapse(true);var s=o.duplicate(),C=0;d=d.value;for(var A=d.indexOf("\n");A>-1&&A<f;A=d.indexOf("\n",A+1))++C;for(o.move("character",f-C);A>-1&&A<r;A=d.indexOf("\n",A+1))++C;s.move("character",
r-C);o.setEndPoint("EndToEnd",s);o.select()}}t.defineMode("null",function(){return{token:function(d){d.skipToEnd()}}});t.defineMIME("text/plain","null");return t}();CodeMirror.overlayParser=function(t,J,I){return{startState:function(){return{base:CodeMirror.startState(t),overlay:CodeMirror.startState(J),basePos:0,baseCur:null,overlayPos:0,overlayCur:null}},copyState:function(q){return{base:CodeMirror.copyState(t,q.base),overlay:CodeMirror.copyState(J,q.overlay),basePos:q.basePos,baseCur:null,overlayPos:q.overlayPos,overlayCur:null}},token:function(q,u){if(q.start==u.basePos){u.baseCur=t.token(q,u.base);u.basePos=q.pos}if(q.start==u.overlayPos){q.pos=q.start;
u.overlayCur=J.token(q,u.overlay);u.overlayPos=q.pos}q.pos=Math.min(u.basePos,u.overlayPos);if(q.eol())u.basePos=u.overlayPos=0;if(u.overlayCur==null)return u.baseCur;return u.baseCur!=null&&I?u.baseCur+" "+u.overlayCur:u.overlayCur},indent:function(q,u){return t.indent(q.base,u)},electricChars:t.electricChars}};CodeMirror.defineMode("clike",function(t,J){function I(k,y){var v=k.next();if(G[v]){var F=G[v](k,y);if(F!==false)return F}if(v=='"'||v=="'"){y.tokenize=q(v);return y.tokenize(k,y)}if(/[\[\]{}\(\),;\:\.]/.test(v)){H=v;return null}if(/\d/.test(v)){k.eatWhile(/[\w\.]/);return"number"}if(v=="/"){if(k.eat("*")){y.tokenize=u;return u(k,y)}if(k.eat("/")){k.skipToEnd();return"comment"}}if(O.test(v)){k.eatWhile(O);return"operator"}k.eatWhile(/[\w\$_]/);v=k.current();if(W.propertyIsEnumerable(v))return"keyword";
if(B.propertyIsEnumerable(v))return"atom";return"word"}function q(k){return function(y,v){for(var F=false,Y,ra=false;(Y=y.next())!=null;){if(Y==k&&!F){ra=true;break}F=!F&&Y=="\\"}if(ra||!(F||L))v.tokenize=I;return"string"}}function u(k,y){for(var v=false,F;F=k.next();){if(F=="/"&&v){y.tokenize=I;break}v=F=="*"}return"comment"}function M(k,y,v,F,Y){this.indented=k;this.column=y;this.type=v;this.align=F;this.prev=Y}function E(k,y,v){return k.context=new M(k.indented,y,v,null,k.context)}function z(k){return k.context=
k.context.prev}var V=t.indentUnit,W=J.keywords||{},B=J.atoms||{},G=J.hooks||{},L=J.multiLineStrings,O=/[+\-*&%=<>!?|\/]/,H;return{startState:function(k){return{tokenize:null,context:new M((k||0)-V,0,"top",false),indented:0,startOfLine:true}},token:function(k,y){var v=y.context;if(k.sol()){if(v.align==null)v.align=false;y.indented=k.indentation();y.startOfLine=true}if(k.eatSpace())return null;H=null;var F=(y.tokenize||I)(k,y);if(F=="comment"||F=="meta")return F;if(v.align==null)v.align=true;if((H==
";"||H==":")&&v.type=="statement")z(y);else if(H=="{")E(y,k.column(),"}");else if(H=="[")E(y,k.column(),"]");else if(H=="(")E(y,k.column(),")");else if(H=="}"){if(v.type=="statement")v=z(y);if(v.type=="}")v=z(y);v.type=="statement"&&z(y)}else if(H==v.type)z(y);else if(v.type=="}"||v.type=="top")E(y,k.column(),"statement");y.startOfLine=false;return F},indent:function(k,y){if(k.tokenize!=I&&k.tokenize!=null)return 0;var v=y&&y.charAt(0),F=k.context,Y=v==F.type;return F.type=="statement"?F.indented+
(v=="{"?0:V):F.align?F.column+(Y?0:1):F.indented+(Y?0:V)},electricChars:"{}"}});
(function(){function t(q){var u={};q=q.split(" ");for(var M=0;M<q.length;++M)u[q[M]]=true;return u}function J(q,u){if(!u.startOfLine)return false;q.skipToEnd();return"meta"}function I(q,u){for(var M;(M=q.next())!=null;)if(M=='"'&&!q.eat('"')){u.tokenize=null;break}return"string"}CodeMirror.defineMIME("text/x-csrc",{name:"clike",keywords:t("auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile"),atoms:t("null"),
hooks:{"#":J}});CodeMirror.defineMIME("text/x-c++src",{name:"clike",keywords:t("auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t"),
atoms:t("true false null"),hooks:{"#":J}});CodeMirror.defineMIME("text/x-java",{name:"clike",keywords:t("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),atoms:t("true false null"),hooks:{"@":function(q){q.eatWhile(/[\w\$_]/);
return"meta"}}});CodeMirror.defineMIME("text/x-csharp",{name:"clike",keywords:t("abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern finally fixed float for foreach goto if implicit in int interface internal is lock long namespace new object operator out override params private protected public readonly ref return sbyte sealed short sizeof stackalloc static string struct switch this throw try typeof uint ulong unchecked unsafe ushort using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),
atoms:t("true false null"),hooks:{"@":function(q,u){if(q.eat('"')){u.tokenize=I;return I(q,u)}q.eatWhile(/[\w\$_]/);return"meta"}}})})();CodeMirror.defineMode("python",function(t){function J(w){return RegExp("^(("+w.join(")|(")+"))\\b")}function I(w,K){if(w.sol()){var P=K.scopes[0].offset;if(w.eatSpace()){var T=w.indentation();if(T>P)Da="indent";else if(T<P)Da="dedent";return null}else P>0&&M(w,K)}if(w.eatSpace())return null;if(w.peek()==="#"){w.skipToEnd();return"comment"}if(w.match(/^[0-9\.]/,false)){P=false;if(w.match(/^\d*\.\d+(e[\+\-]?\d+)?/i))P=true;if(w.match(/^\d+\.\d*/))P=true;if(w.match(/^\.\d+/))P=true;if(P){w.eat(/J/i);
return"number"}P=false;if(w.match(/^0x[0-9a-f]+/i))P=true;if(w.match(/^0b[01]+/i))P=true;if(w.match(/^0o[0-7]+/i))P=true;if(w.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){w.eat(/J/i);P=true}if(w.match(/^0(?![\dx])/i))P=true;if(P){w.eat(/L/i);return"number"}}if(w.match(Y)){K.tokenize=q(w.current());return K.tokenize(w,K)}if(w.match(L)||w.match(G))return null;if(w.match(B)||w.match(V)||w.match(H))return"operator";if(w.match(W))return null;if(w.match(bb))return"builtin";if(w.match(ra))return"keyword";if(w.match(O))return"variable";
w.next();return z}function q(w){for(;"rub".indexOf(w[0].toLowerCase())>=0;)w=w.substr(1);var K=RegExp(w),P=w.length==1,T="string";return function(Z,Ja){for(;!Z.eol();){Z.eatWhile(/[^'"\\]/);if(Z.eat("\\")){Z.next();if(P&&Z.eol())return T}else if(Z.match(K)){Ja.tokenize=I;return T}else Z.eat(/['"]/)}if(P)if(t.mode.singleLineStringErrors)T=z;else Ja.tokenize=I;return T}}function u(w,K,P){P=P||"py";var T=0;if(P==="py")for(w=0;w<K.scopes.length;++w){if(K.scopes[w].type==="py"){T=K.scopes[w].offset+t.indentUnit;
break}}else T=w.column()+w.current().length;K.scopes.unshift({offset:T,type:P})}function M(w,K){if(K.scopes.length!=1){if(K.scopes[0].type==="py"){for(var P=w.indentation(),T=-1,Z=0;Z<K.scopes.length;++Z)if(P===K.scopes[Z].offset){T=Z;break}if(T===-1)return true;for(;K.scopes[0].offset!==P;)K.scopes.shift()}else K.scopes.shift();return false}}function E(w,K){Da=null;var P=K.tokenize(w,K),T=w.current();if(T==="."){P=K.tokenize(w,K);w.current();return P==="variable"?"variable":z}if(T==="@"){P=K.tokenize(w,
K);T=w.current();return P==="variable"||T==="@staticmethod"||T==="@classmethod"?"meta":z}if(T==="pass"||T==="return")K.dedent+=1;if(T===":"&&!K.lambda&&K.scopes[0].type=="py"||Da==="indent")u(w,K);var Z="[({".indexOf(T);Z!==-1&&u(w,K,"])}".slice(Z,Z+1));if(Da==="dedent")if(M(w,K))return z;Z="])}".indexOf(T);if(Z!==-1)if(M(w,K))return z;if(K.dedent>0&&w.eol()&&K.scopes[0].type=="py"){K.scopes.length>1&&K.scopes.shift();K.dedent-=1}return P}var z="error",V=/^[\+\-\*\/%&|\^~<>!]/,W=/^[\(\)\[\]\{\}@,:`=;\.]/,
B=/^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(\/\/)|(\*\*))/,G=/^((\+=)|(\-=)|(\*=)|(%=)|(\/=)|(&=)|(\|=)|(\^=))/,L=/^((\/\/=)|(>>=)|(<<=)|(\*\*=))/,O=/^[_A-Za-z][_A-Za-z0-9]*/,H=J(["and","or","not","is","in"]),k=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],y=["bool","classmethod","complex","dict","enumerate","float","frozenset","int","list","object","property","reversed",
"set","slice","staticmethod","str","super","tuple","type"],v={types:["basestring","buffer","file","long","unicode","xrange"],keywords:["exec","print"]},F={types:["bytearray","bytes","filter","map","memoryview","open","range","zip"],keywords:["nonlocal"]};if(t.mode.version&&parseInt(t.mode.version,10)===3){k=k.concat(F.keywords);y=y.concat(F.types);var Y=/^(([rb]|(br))?('{3}|"{3}|['"]))/i}else{k=k.concat(v.keywords);y=y.concat(v.types);Y=/^(([rub]|(ur)|(br))?('{3}|"{3}|['"]))/i}var ra=J(k),bb=J(y),
Da=null;return{startState:function(w){return{tokenize:I,scopes:[{offset:w||0,type:"py"}],lastToken:null,lambda:false,dedent:0}},token:function(w,K){var P=E(w,K);K.lastToken={style:P,content:w.current()};if(w.eol()&&w.lambda)K.lambda=false;return P},indent:function(w){if(w.tokenize!=I)return 0;return w.scopes[0].offset}}});CodeMirror.defineMIME("text/x-python","python");(function(){function t(q){var u={};q=q.split(" ");for(var M=0;M<q.length;++M)u[q[M]]=true;return u}function J(q){return function(u,M){if(u.match(q))M.tokenize=null;else u.skipToEnd();return"string"}}var I={name:"clike",keywords:t("not exp log srand xor s qq qx x length uc ord and print chr for qw q join use sub tied eval int lc m cos y abs ne open hex ref scalar sqrt printf each return local or undef oct time foreach alarm chdir kill exec gt sin sort split close"),atoms:t("true false null"),multiLineStrings:true,
hooks:{"#":function(q){q.skipToEnd();return"comment"},$:function(q){q.eatWhile(/[\w\$_]/);return"variable-2"},"@":function(q){q.eatWhile(/[\w\$_]/);return"variable-2"},"%":function(q){q.eatWhile(/[\w\$_]/);return"variable-2"},"&":function(q){q.eatWhile(/[\w\$_]/);return"variable-2"},"<":function(q,u){if(q.match(/<</)){q.eatWhile(/[\w\.]/);u.tokenize=J(q.current().slice(3));return u.tokenize(q,u)}return false}}};CodeMirror.defineMIME("text/x-perl",I)})();CodeMirror.defineMode("ruby",function(t,J){function I(L){return RegExp("^(?:"+L.join("|")+")$","i")}function q(L,O){var H=L.next();if(H=="#"){L.skipToEnd();return"comment"}if(H=='"'||H=="'")return(O.cur=u(H))(L,O);if(/\d/.test(H)){L.eatWhile(/[\w.%]/);return"number"}if(/[\w_]/.test(H)){L.eatWhile(/[\w\\\-_.]/);return"variable"}return null}function u(L){return function(O,H){for(var k=false,y;(y=O.next())!=null;){if(y==L&&!k)break;k=!k&&y=="\\"}if(!k)H.cur=q;return"string"}}var M=t.indentUnit,E=I(J.specials||
[]),z=I(["puts","Array","Float","Integer","String","at_exit","autoload","binding","caller","catch","chomp","eval","exec","exit","fail","fork","format","gets","gsub","iterator","lambda","load","loop","open","print","printf","proc","putc","puts","raise","rand","readline","readlines","require","select","sleep","split","sprintf","srand","sub","syscall","system","test","trace_var","trap","untrace_var"]),V=I(["alias","and","BEGIN","begin","break","case","class","def","defined","do","else","elsif","END",
"end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield"]),W=I(["def","case","for","while","do","module","then","unless","\\(","{"]),B=I(["end","until","\\)","}"]),G=/^(?:end|until|\)|}|else|elsif)/i;return{startState:function(L){return{basecol:L||0,indentDepth:0,cur:q}},token:function(L,O){if(L.eatSpace())return null;var H=O.cur(L,O),k=L.current();if(H=="variable")if(V.test(k))H=
"keyword";else if(z.test(k))H="builtin";else if(E.test(k))H="variable-2";if(W.test(k))++O.indentDepth;else B.test(k)&&--O.indentDepth;return H},indent:function(L,O){var H=G.test(O);return L.basecol+M*(L.indentDepth-(H?1:0))}}});CodeMirror.defineMIME("text/x-ruby","ruby");CodeMirror.defineMode("haskell",function(){function t(k,y,v){y(v);return v(k,y)}function J(k,y){if(k.eatWhile(O))return null;var v=k.next();if(L.test(v)){if(v=="{"&&k.eat("-")){var F="comment";if(k.eat("#"))F="meta";return t(k,y,I(F,1))}return null}if(v=="'"){k.eat("\\");k.next();if(k.eat("'"))return"string";return"error"}if(v=='"')return t(k,y,q);if(E.test(v)){k.eatWhile(B);if(k.eat("."))return"qualifier";return"variable-2"}if(M.test(v)){k.eatWhile(B);return"variable"}if(z.test(v)){if(v=="0"){if(k.eat(/[xX]/)){k.eatWhile(V);
return"integer"}if(k.eat(/[oO]/)){k.eatWhile(W);return"number"}}k.eatWhile(z);F="number";if(k.eat(".")){F="number";k.eatWhile(z)}if(k.eat(/[eE]/)){F="number";k.eat(/[-+]/);k.eatWhile(z)}return F}if(G.test(v)){if(v=="-"&&k.eat(/-/)){k.eatWhile(/-/);if(!k.eat(G)){k.skipToEnd();return"comment"}}F="variable";if(v==":")F="variable-2";k.eatWhile(G);return F}return"error"}function I(k,y){if(y==0)return J;return function(v,F){for(var Y=y;!v.eol();){var ra=v.next();if(ra=="{"&&v.eat("-"))++Y;else if(ra=="-"&&
v.eat("}")){--Y;if(Y==0){F(J);return k}}}F(I(k,Y));return k}}function q(k,y){for(;!k.eol();){var v=k.next();if(v=='"'){y(J);return"string"}if(v=="\\"){if(k.eol()||k.eat(O)){y(u);return"string"}k.eat("&")||k.next()}}y(J);return"error"}function u(k,y){if(k.eat("\\"))return t(k,y,q);k.next();y(J);return"error"}var M=/[a-z_]/,E=/[A-Z]/,z=/[0-9]/,V=/[0-9A-Fa-f]/,W=/[0-7]/,B=/[a-z_A-Z0-9']/,G=/[-!#$%&*+.\/<=>?@\\^|~:]/,L=/[(),;[\]`{}]/,O=/[ \t\v\f]/,H=function(){function k(v){return function(){for(var F=
0;F<arguments.length;F++)y[arguments[F]]=v}}var y={};k("keyword")("case","class","data","default","deriving","do","else","foreign","if","import","in","infix","infixl","infixr","instance","let","module","newtype","of","then","type","where","_");k("keyword")("..",":","::","=","\\",'"',"<-","->","@","~","=>");k("builtin")("!!","$!","$","&&","+","++","-",".","/","/=","<","<=","=<<","==",">",">=",">>",">>=","^","^^","||","*","**");k("builtin")("Bool","Bounded","Char","Double","EQ","Either","Enum","Eq",
"False","FilePath","Float","Floating","Fractional","Functor","GT","IO","IOError","Int","Integer","Integral","Just","LT","Left","Maybe","Monad","Nothing","Num","Ord","Ordering","Rational","Read","ReadS","Real","RealFloat","RealFrac","Right","Show","ShowS","String","True");k("builtin")("abs","acos","acosh","all","and","any","appendFile","asTypeOf","asin","asinh","atan","atan2","atanh","break","catch","ceiling","compare","concat","concatMap","const","cos","cosh","curry","cycle","decodeFloat","div","divMod",
"drop","dropWhile","either","elem","encodeFloat","enumFrom","enumFromThen","enumFromThenTo","enumFromTo","error","even","exp","exponent","fail","filter","flip","floatDigits","floatRadix","floatRange","floor","fmap","foldl","foldl1","foldr","foldr1","fromEnum","fromInteger","fromIntegral","fromRational","fst","gcd","getChar","getContents","getLine","head","id","init","interact","ioError","isDenormalized","isIEEE","isInfinite","isNaN","isNegativeZero","iterate","last","lcm","length","lex","lines","log",
"logBase","lookup","map","mapM","mapM_","max","maxBound","maximum","maybe","min","minBound","minimum","mod","negate","not","notElem","null","odd","or","otherwise","pi","pred","print","product","properFraction","putChar","putStr","putStrLn","quot","quotRem","read","readFile","readIO","readList","readLn","readParen","reads","readsPrec","realToFrac","recip","rem","repeat","replicate","return","reverse","round","scaleFloat","scanl","scanl1","scanr","scanr1","seq","sequence","sequence_","show","showChar",
"showList","showParen","showString","shows","showsPrec","significand","signum","sin","sinh","snd","span","splitAt","sqrt","subtract","succ","sum","tail","take","takeWhile","tan","tanh","toEnum","toInteger","toRational","truncate","uncurry","undefined","unlines","until","unwords","unzip","unzip3","userError","words","writeFile","zip","zip3","zipWith","zipWith3");return y}();return{startState:function(){return{f:J}},copyState:function(k){return{f:k.f}},token:function(k,y){var v=y.f(k,function(Y){y.f=
Y}),F=k.current();return F in H?H[F]:v}}});CodeMirror.defineMIME("text/x-haskell","haskell");(function(){function t(q){var u={};q=q.split(" ");for(var M=0;M<q.length;++M)u[q[M]]=true;return u}function J(q){return function(u,M){if(u.match(q))M.tokenize=null;else u.skipToEnd();return"string"}}var I={name:"clike",keywords:t("abstract and array as break case catch cfunction class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw try use var while xor return"),
atoms:t("true false null"),multiLineStrings:true,hooks:{$:function(q){q.eatWhile(/[\w\$_]/);return"variable-2"},"<":function(q,u){if(q.match(/<</)){q.eatWhile(/[\w\.]/);u.tokenize=J(q.current().slice(3));return u.tokenize(q,u)}return false}}};CodeMirror.defineMode("php",function(q,u){function M(B,G){if(G.curMode==E){var L=E.token(B,G.curState);if(L=="meta"&&/^<\?/.test(B.current())){G.curMode=W;G.curState=G.php;G.curClose=/^\?>/}else if(L=="tag"&&B.current()==">"&&G.curState.context)if(/^script$/i.test(G.curState.context.tagName)){G.curMode=
z;G.curState=z.startState(E.indent(G.curState,""));G.curClose=/^<\/\s*script\s*>/i}else if(/^style$/i.test(G.curState.context.tagName)){G.curMode=V;G.curState=V.startState(E.indent(G.curState,""));G.curClose=/^<\/\s*style\s*>/i}return L}else if(B.match(G.curClose,false)){G.curMode=E;G.curState=G.html;G.curClose=null;return M(B,G)}else return G.curMode.token(B,G.curState)}var E=CodeMirror.getMode(q,"text/html"),z=CodeMirror.getMode(q,"text/javascript"),V=CodeMirror.getMode(q,"text/css"),W=CodeMirror.getMode(q,
I);return{startState:function(){var B=E.startState();return{html:B,php:W.startState(),curMode:u.startOpen?W:E,curState:u.startOpen?W.startState():B,curClose:u.startOpen?/^\?>/:null}},copyState:function(B){var G=B.html,L=CodeMirror.copyState(E,G),O=B.php,H=CodeMirror.copyState(W,O);G=B.curState==G?L:B.curState==O?H:CodeMirror.copyState(B.curMode,B.curState);return{html:L,php:H,curMode:B.curMode,curState:G,curClose:B.curClose}},token:M,indent:function(B,G){if(B.curMode!=W&&/^\s*<\//.test(G)||B.curMode==
W&&/^\?>/.test(G))return E.indent(B.html,G);return B.curMode.indent(B.curState,G)},electricChars:"/{}:"}});CodeMirror.defineMIME("application/x-httpd-php","php");CodeMirror.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:true});CodeMirror.defineMIME("text/x-php",I)})();jQuery.cookie=function(t,J,I){if(arguments.length>1&&String(J)!=="[object Object]"){I=jQuery.extend({},I);if(J===null||J===undefined)I.expires=-1;if(typeof I.expires==="number"){var q=I.expires,u=I.expires=new Date;u.setDate(u.getDate()+q)}J=String(J);return document.cookie=[encodeURIComponent(t),"=",I.raw?J:encodeURIComponent(J),I.expires?"; expires="+I.expires.toUTCString():"",I.path?"; path="+I.path:"",I.domain?"; domain="+I.domain:"",I.secure?"; secure":""].join("")}I=J||{};u=I.raw?function(M){return M}:
decodeURIComponent;return(q=RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?u(q[1]):null};(function(t){function J(E){var z=[],V;for(V in E)E.hasOwnProperty(V)&&z.push(V);return z}var I={inputName:"answer",currentLanguage:null,codeStorage:{},afterLanguageChange:function(){},onCompile:function(){},editorOptions:{lineNumbers:true,indentUnit:4},compileShortcutEnabled:true},q={c:"text/x-csrc",cpp:"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp",haskell:"text/x-haskell",php:"text/x-php",python:"text/x-python",perl:"text/x-perl",ruby:"text/x-ruby",bash:"text/x-bash",code:"text/plain"},
u={c:"C",cpp:"C++",java:"Java",csharp:"C#",haskell:"Haskell",php:"PHP",python:"Python",ruby:"Ruby",perl:"Perl",bash:"BASH",code:"Generic"},M={init:function(E){var z=t.extend(I,E);z=t.extend(z,{languages:J(z.codeStorage)});if(z.currentLanguage==null||z.currentLanguage==""){E=t.cookie("user_language");z.currentLanguage=E&&z.codeStorage[E]?E:z.languages[0]}this.html("<div class='clearfix'></div><div id='language-switcher'><span style='margin-right: 10px;'>Pick your language:</span> </div><textarea id='codeArea' name='"+
z.inputName+"'></textarea><a id='keyboard-shortcuts' href='#'></a><input type='hidden' id='langInput' name='lang' />");t("#langInput").val(z.currentLanguage);var V=t("#language-switcher");t.each(z.languages,function(L,O){V.append("<a href='#' class='language-tab' data-lang='"+O+"'>"+u[O]+"</a>")});E=t("#keyboard-shortcuts");var W="<img src='images/keyboard.png'> Keyboard Shortcuts Available<span id='shortcuts-list' style='display:none'>:";if(z.compileShortcutEnabled)W+=" Alt-C - <strong>Compile</strong>.";
W+=" Ctrl-Z - <strong>Undo</strong>. Ctrl-R - <strong>Redo</strong></span>";E.html(W);E.click(function(){var L=t("#shortcuts-list");L.is(":visible")?L.fadeOut():L.fadeIn();return false});E=document.getElementById("codeArea");W=t.extend(z.editorOptions,{firstLineNumber:z.codeStorage[z.currentLanguage].startLine,mode:q[z.currentLanguage]});var B=CodeMirror.fromTextArea(E,W);B.setValue(z.codeStorage[z.currentLanguage].code);var G=this;t(".language-tab").click(function(){G.codeShell("changeLanguage",
t(this).attr("data-lang"));t(".language-tab").removeClass("active").removeClass("power");t(this).addClass("active").addClass("power");t.cookie("user_language",t(this).attr("data-lang"));return false});t(".language-tab[data-lang='"+z.currentLanguage+"']").addClass("active").addClass("power");B.setOption("onKeyEvent",function(L,O){if(O.type=="keydown"){if(O.ctrlKey)if(O.keyCode==90){L.undo();O.stop()}else if(O.keyCode==82){L.redo();O.stop()}if(O.altKey)if(O.keyCode==67){z.onCompile(B);O.stop()}}if(O.type==
"keypress")z.codeStorage[z.currentLanguage].dirty=true});this.data("codeshell-data",{options:z,editor:B})},changeLanguage:function(E){var z=this.data("codeshell-data"),V=z.options.codeStorage[E].startLine,W=z.options.currentLanguage;if(W!=E){z.editor.setOption("mode",q[E]);z.editor.setOption("firstLineNumber",V);z.options.codeStorage[W].code=z.editor.getValue();z.options.currentLanguage=E;z.editor.setValue(z.options.codeStorage[E].code);t("#langInput").val(z.options.currentLanguage)}},getValue:function(){return this.data("codeshell-data").editor.getValue()},
getCurrentLanguage:function(){return this.data("codeshell-data").options.currentLanguage},isCurrentCodeDirty:function(){var E=this.data("codeshell-data");return E.options.codeStorage[E.options.currentLanguage].dirty},getDirtyLanguages:function(){var E=this.data("codeshell-data"),z=[],V;for(V in E.options.codeStorage)E.options.codeStorage[V].dirty&&z.push(u[V]);return z}};t.fn.codeShell=function(E){if(M[E])return M[E].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof E==="object"||
!E)return M.init.apply(this,arguments);else t.error("Method "+E+" does not exist on codeShell")}})(jQuery);
